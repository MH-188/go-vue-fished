package tools

import "testing"

func TestRmUndefinedOfResponse(t *testing.T) {
	str := `{ "global": { "appSettings": { "notificationInterval": 30, "retryFeeds": true, "grayModeConfig": { "global": false, "dateRange": ["2023-08-01 00:00:00", "2023-08-19 23:59:59"], "greyRule": { "layout": { "enable": false, "pages": ["Explore"] }, "pages": ["Explore"] }, "disableLikeNotes": ["64ce36f7000000000c036ba5"], "disableSearchHint": false } }, "supportWebp": true, "serverTime": 1693648257075, "grayMode": false, "referer": "", "pwaAddDesktopPrompt": undefined, "firstVisitUrl": undefined, "easyAccessModalVisible": { "addDesktopGuide": false, "collectGuide": false, "keyboardList": false, "miniWindowGuide": false } }, "user": { "loggedIn": false, "activated": false, "userInfo": { "userId": undefined, "redId": undefined }, "follow": [], "userPageData": {}, "activeTabKey": 0, "notes": [[], [], []], "isFetchingNotes": [false, false, false], "tabScrollTop": [0, 0, 0], "userFetchingStatus": undefined, "userNoteFetchingStatus": undefined, "bannedInfo": { "code": 0, "showAlert": false, "reason": "" }, "firstFetchNote": true, "noteQueries": [{ "num": 30, "cursor": "", "userId": "", "hasMore": true }, { "num": 30, "cursor": "", "userId": "", "hasMore": true }, { "num": 30, "cursor": "", "userId": "", "hasMore": true }] }, "login": { "loginMethod": undefined, "from": "", "showLogin": false, "agreed": false, "showTooltip": false, "loginData": { "phone": "", "authCode": "" }, "errors": { "phone": "", "authCode": "" }, "qrData": { "backend": { "qrId": "", "code": "" }, "image": "", "status": "un_scanned" }, "showLoginFloatingBox": false, "inAntiSpamChecking": false }, "feed": { "query": { "cursorScore": "", "num": 30, "refreshType": 1, "noteIndex": 0, "unreadBeginNoteId": "", "unreadEndNoteId": "", "unreadNoteCount": 0, "category": "homefeed_recommend", "searchKey": "", "needNum": 20, "imageScenes": [] }, "feedBizFmp": { "fmp": 0, "fmpWithImg": 0 }, "isFetching": false, "isError": false, "feedsWrapper": undefined, "feeds": [], "currentChannel": "homefeed_recommend", "unreadInfo": { "cachedFeeds": [], "unreadBeginNoteId": "", "unreadEndNoteId": "", "unreadNoteCount": 0, "timestamp": 0 }, "preloadSuccess": false, "preloadConfig": { "usePreload": false, "cacheExpires": 259200000, "checkCache": false }, "validIds": { "noteIds": [] }, "mfStatistics": { "timestamp": 0, "visitTimes": 0, "readFeedCount": 0 }, "channels": undefined, "isResourceDisplay": false, "isActivityEnd": false, "cancelFeedRequest": false, "mfRequestMetaData": { "start": null, "lasting": null } }, "layout": { "layoutInfoReady": false, "columns": 6, "columnsWithSidebar": 6, "gap": { "vertical": 16, "horizontal": 32 }, "columnWidth": 0, "interactionWidth": 0, "widthType": "normal", "bufferRow": 3 }, "activity": { "isOpen": false, "currentUrl": "", "entryList": [] }, "search": { "state": "auto", "searchContext": { "keyword": "", "page": 1, "pageSize": 20, "searchId": "", "sort": "general", "noteType": 0 }, "feeds": [], "searchValue": "", "suggestions": [], "userInputSugTrigger": "", "keywordFrom": 2, "searchRecFilter": [], "searchRecFilterTag": null, "searchFeedsWrapper": undefined, "currentSearchType": "note", "hintWord": { "title": "\xe6\x90\x9c\xe7\xb4\xa2\xe5\xb0\x8f\xe7\xba\xa2\xe4\xb9\xa6", "searchWord": "\xe5\xb0\x8f\xe7\xba\xa2\xe4\xb9\xa6\xe7\xbd\x91\xe9\xa1\xb5\xe7\x89\x88", "hintWordRequestId": "default", "type": "default" }, "sugType": null, "queryTrendingInfo": undefined, "queryTrendingParams": { "source": "ExploreNote", "searchType": "trend", "lastQuery": "", "lastQueryTime": 0, "wordRequestSituation": "FIRST_ENTER", "hintWord": "", "hintWordType": "", "hintWordRequestId": "" }, "queryTrendingFetched": false, "oneboxInfo": {}, "hasMore": true, "firstEnterSearchPage": true, "userLists": [], "fetchUserListsStatus": "auto", "isFetchingUserLists": false, "enableUserListsExp": undefined, "enableUserSugExp": undefined, "enableOneboxExp": undefined, "hasMoreUser": true, "searchCplId": undefined, "wordRequestId": undefined }, "note": { "prevRouteData": {}, "prevRoute": "Empty", "commentTarget": {}, "isImgFullscreen": false, "gotoPage": "", "firstNoteId": "64f19b5f000000001d014c15", "fetchNotePromise": {}, "autoOpenNote": false, "topCommentId": "", "noteDetailMap": { "64f19b5f000000001d014c15": { "comments": { "list": [], "cursor": "", "hasMore": true, "loading": false, "firstRequestFinish": false }, "currentTime": 1693648257152, "note": { "shareInfo": { "unShare": false }, "type": "normal", "desc": "", "interactInfo": { "liked": false, "likedCount": "10+", "collected": false, "collectedCount": "10+", "commentCount": "6", "shareCount": "1", "followed": false }, "time": 1693555551000, "ipLocation": "\xe4\xb8\x8a\xe6\xb5\xb7", "atUserList": [], "lastUpdateTime": 1693555552000, "noteId": "64f19b5f000000001d014c15", "title": "", "user": { "nickname": "\xe5\xbe\x90\xe5\xa4\xa7\xe4\xba\xba", "avatar": "https:\\u002F\\u002Fsns-avatar-qc.xhscdn.com\\u002Favatar\\u002F1040g2jo30ogt09isi6005oaf902gkmqa7stjmdg", "userId": "614f48050000000002025b4a" }, "imageList": [{ "fileId": "851b040f-d291-e19b-ebde-7525e707111a", "height": 1920, "width": 1174, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F851b040f-d291-e19b-ebde-7525e707111a", "traceId": "1040g00830ofkelo42e005oaf902gkmqa51vh9oo" }, { "traceId": "1040g00830ofkelo42e0g5oaf902gkmqas4gjuso", "fileId": "4155a174-eeb3-b21f-41aa-41d745a24f82", "height": 1920, "width": 1104, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F4155a174-eeb3-b21f-41aa-41d745a24f82" }, { "height": 1194, "width": 1920, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002Faca83841-9e06-b32e-6304-6d73c1d2caf5", "traceId": "1040g00830ofkelo42e105oaf902gkmqa3efta58", "fileId": "aca83841-9e06-b32e-6304-6d73c1d2caf5" }, { "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F1d1f341d-be99-55f4-392f-f3ca223ec679", "traceId": "1040g00830ofkelo42e1g5oaf902gkmqa1a15a50", "fileId": "1d1f341d-be99-55f4-392f-f3ca223ec679", "height": 1920, "width": 1152 }, { "fileId": "2ed0096e-d00b-ad0f-8fc6-38bd50622cd2", "height": 1920, "width": 1240, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F2ed0096e-d00b-ad0f-8fc6-38bd50622cd2", "traceId": "1040g00830ofkelo42e205oaf902gkmqauffvg50" }, { "fileId": "3b96e59e-afb8-d11e-5f2d-6b014cb9d81c", "height": 1920, "width": 1204, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F3b96e59e-afb8-d11e-5f2d-6b014cb9d81c", "traceId": "1040g00830ofkelo42e2g5oaf902gkmqakjps79o" }, { "fileId": "037c63c1-ee5e-06c4-a38c-6ea2df0e071e", "height": 1920, "width": 1098, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F037c63c1-ee5e-06c4-a38c-6ea2df0e071e", "traceId": "1040g00830ofkelo42e305oaf902gkmqa1a8nk1o" }, { "width": 1272, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F486a63bf-3c46-0785-9853-1ffc08e3836e", "traceId": "1040g00830ofkelo42e3g5oaf902gkmqaq63bli8", "fileId": "486a63bf-3c46-0785-9853-1ffc08e3836e", "height": 1920 }, { "fileId": "16044465-702c-36fa-bfb5-a3238105ad4b", "height": 1200, "width": 1920, "url": "https:\\u002F\\u002Fsns-img-hw.xhscdn.net\\u002F16044465-702c-36fa-bfb5-a3238105ad4b", "traceId": "1040g00830ofkelo42e405oaf902gkmqaha08v9o" }], "tagList": [] } } }, "serverRequestInfo": { "state": "success", "errorCode": 0, "errMsg": "" }, "volume": 0 }, "notification": { "isFetching": false, "activeTabKey": -1, "notificationCount": { "unreadCount": 0, "mentions": 0, "likes": 0, "connections": 0 }, "notificationMap": { "mentions": { "messageList": [], "hasMore": true, "cursor": "" }, "likes": { "messageList": [], "hasMore": true, "cursor": "" }, "connections": { "messageList": [], "hasMore": true, "cursor": "" } } }, "redMoji": { "mojiData": { "version": "", "redmojiTabs": [], "redmojiMap": {} } } }`

	RmUndefinedOfResponse(str)

}
